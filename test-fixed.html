<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>éŸ³ä¹ç››å®´ç½‘ç«™ - ä¿®å¤éªŒè¯é¡µé¢</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            min-height: 100vh;
        }
        .test-section {
            background: rgba(255,255,255,0.1);
            padding: 20px;
            margin: 20px 0;
            border-radius: 10px;
            backdrop-filter: blur(10px);
        }
        .success { color: #4ade80; }
        .error { color: #f87171; }
        .warning { color: #fbbf24; }
        .info { color: #60a5fa; }
        button {
            background: #3b82f6;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover {
            background: #2563eb;
        }
        #console-output {
            height: 300px;
            overflow-y: auto;
            background: rgba(0,0,0,0.3);
            padding: 15px;
            border-radius: 5px;
            font-family: monospace;
            font-size: 12px;
        }
    </style>
</head>
<body>
    <h1>ğŸµ éŸ³ä¹ç››å®´ç½‘ç«™ - ä¿®å¤éªŒè¯é¡µé¢</h1>
    
    <div class="test-section">
        <h2>âœ… å·²ä¿®å¤çš„é—®é¢˜</h2>
        <ul>
            <li class="success">å˜é‡é‡å¤å£°æ˜é”™è¯¯ - å·²ä¿®å¤</li>
            <li class="success">script-new.js æ–‡ä»¶ç¼ºå¤± - å·²æ¢å¤</li>
            <li class="success">åšå®¢ç³»ç»Ÿç±»åå¼•ç”¨é”™è¯¯ - å·²ä¿®æ­£</li>
            <li class="success">æ¨¡å—åˆå§‹åŒ–å†²çª - å·²è§£å†³</li>
        </ul>
    </div>
    
    <div class="test-section">
        <h2>ğŸ§ª åŠŸèƒ½æµ‹è¯•</h2>
        <button onclick="testVariableDeclaration()">æµ‹è¯•å˜é‡å£°æ˜</button>
        <button onclick="testModuleLoading()">æµ‹è¯•æ¨¡å—åŠ è½½</button>
        <button onclick="testBlogSystem()">æµ‹è¯•åšå®¢ç³»ç»Ÿ</button>
        <button onclick="clearConsole()">æ¸…ç©ºæ§åˆ¶å°</button>
    </div>
    
    <div class="test-section">
        <h2>ğŸ“Š æ§åˆ¶å°è¾“å‡º</h2>
        <div id="console-output"></div>
    </div>
    
    <div class="test-section">
        <h2>ğŸ”§ æŠ€æœ¯è¯´æ˜</h2>
        <p>ä¿®å¤å†…å®¹ï¼š</p>
        <ul>
            <li>å°† <code>let</code> æ”¹ä¸º <code>var</code> é¿å…é‡å¤å£°æ˜é”™è¯¯</li>
            <li>ç§»é™¤äº† <code>blog-system.js</code> ä¸­çš„é‡å¤åˆå§‹åŒ–ä»£ç </li>
            <li>ç»Ÿä¸€ç”± <code>script-new.js</code> ç®¡ç†æ‰€æœ‰æ¨¡å—åˆå§‹åŒ–</li>
            <li>é¿å…äº†å¤šä¸ªè„šæœ¬åŒæ—¶å£°æ˜åŒä¸€å˜é‡çš„é—®é¢˜</li>
        </ul>
    </div>

    <script>
        // é‡å†™console.logæ¥æ•è·è¾“å‡º
        const originalLog = console.log;
        const originalWarn = console.warn;
        const originalError = console.error;
        
        function addToConsole(type, message) {
            const output = document.getElementById('console-output');
            const timestamp = new Date().toLocaleTimeString();
            const div = document.createElement('div');
            div.style.color = type === 'error' ? '#f87171' : type === 'warn' ? '#fbbf24' : '#60a5fa';
            div.innerHTML = `[${timestamp}] ${type.toUpperCase()}: ${message}`;
            output.appendChild(div);
            output.scrollTop = output.scrollHeight;
        }
        
        console.log = function(...args) {
            originalLog.apply(console, args);
            addToConsole('log', args.join(' '));
        };
        
        console.warn = function(...args) {
            originalWarn.apply(console, args);
            addToConsole('warn', args.join(' '));
        };
        
        console.error = function(...args) {
            originalError.apply(console, args);
            addToConsole('error', args.join(' '));
        };
        
        // æµ‹è¯•å˜é‡å£°æ˜
        function testVariableDeclaration() {
            console.log('ğŸ§ª æµ‹è¯•å˜é‡å£°æ˜...');
            
            try {
                // å°è¯•å£°æ˜å¯èƒ½å†²çªçš„å˜é‡
                var testVar1 = 'test1';
                var testVar2 = 'test2';
                var testVar3 = 'test3';
                
                console.log('âœ… å˜é‡å£°æ˜æµ‹è¯•é€šè¿‡');
                console.log('testVar1:', testVar1);
                console.log('testVar2:', testVar2);
                console.log('testVar3:', testVar3);
                
                // æµ‹è¯•å…¨å±€å˜é‡æ˜¯å¦å¯ç”¨
                if (typeof window.projectManager !== 'undefined') {
                    console.log('âœ… projectManager å…¨å±€å˜é‡å¯ç”¨');
                } else {
                    console.log('âš ï¸ projectManager å…¨å±€å˜é‡æœªå®šä¹‰');
                }
                
            } catch (error) {
                console.error('âŒ å˜é‡å£°æ˜æµ‹è¯•å¤±è´¥:', error);
            }
        }
        
        // æµ‹è¯•æ¨¡å—åŠ è½½
        function testModuleLoading() {
            console.log('ğŸ§ª æµ‹è¯•æ¨¡å—åŠ è½½...');
            
            const modules = [
                'ProjectManager',
                'SkillVisualizer',
                'TimelineManager',
                'OptimizedBlogSystem',
                'MapManager',
                'ThemeManager',
                'UIEffectsManager',
                'MusicWebsiteCore'
            ];
            
            let loadedCount = 0;
            modules.forEach(moduleName => {
                if (typeof window[moduleName] !== 'undefined') {
                    loadedCount++;
                    console.log(`âœ… ${moduleName} å·²åŠ è½½`);
                } else {
                    console.log(`âŒ ${moduleName} æœªåŠ è½½`);
                }
            });
            
            console.log(`ğŸ“Š æ¨¡å—åŠ è½½ç»Ÿè®¡: ${loadedCount}/${modules.length}`);
            
            if (loadedCount === modules.length) {
                console.log('ğŸ‰ æ‰€æœ‰æ¨¡å—åŠ è½½å®Œæˆï¼');
            } else {
                console.log('âš ï¸ éƒ¨åˆ†æ¨¡å—æœªåŠ è½½ï¼Œè¯·æ£€æŸ¥è„šæœ¬å¼•ç”¨');
            }
        }
        
        // æµ‹è¯•åšå®¢ç³»ç»Ÿ
        function testBlogSystem() {
            console.log('ğŸ§ª æµ‹è¯•åšå®¢ç³»ç»Ÿ...');
            
            if (typeof window.OptimizedBlogSystem !== 'undefined') {
                console.log('âœ… OptimizedBlogSystem ç±»å¯ç”¨');
                
                try {
                    // å°è¯•åˆ›å»ºåšå®¢ç³»ç»Ÿå®ä¾‹
                    const blogSystem = new window.OptimizedBlogSystem();
                    console.log('âœ… åšå®¢ç³»ç»Ÿå®ä¾‹åˆ›å»ºæˆåŠŸ');
                    console.log('åšå®¢ç³»ç»Ÿå®ä¾‹:', blogSystem);
                    
                    // æ£€æŸ¥å®ä¾‹æ–¹æ³•
                    if (blogSystem.loadPosts) {
                        console.log('âœ… loadPosts æ–¹æ³•å¯ç”¨');
                    }
                    if (blogSystem.renderBlogInterface) {
                        console.log('âœ… renderBlogInterface æ–¹æ³•å¯ç”¨');
                    }
                    
                } catch (error) {
                    console.error('âŒ åšå®¢ç³»ç»Ÿå®ä¾‹åˆ›å»ºå¤±è´¥:', error);
                }
                
            } else {
                console.error('âŒ OptimizedBlogSystem ç±»ä¸å¯ç”¨');
            }
        }
        
        // æ¸…ç©ºæ§åˆ¶å°
        function clearConsole() {
            document.getElementById('console-output').innerHTML = '';
        }
        
        // é¡µé¢åŠ è½½å®Œæˆåçš„æ£€æŸ¥
        window.addEventListener('load', () => {
            console.log('ğŸµ ä¿®å¤éªŒè¯é¡µé¢åŠ è½½å®Œæˆ');
            console.log('ğŸ“ å½“å‰ç¯å¢ƒ:', window.location.protocol);
            console.log('ğŸŒ å»ºè®®ï¼šä½¿ç”¨æµ‹è¯•æŒ‰é’®æ¥éªŒè¯ä¿®å¤æ•ˆæœ');
            
            // è‡ªåŠ¨æµ‹è¯•æ¨¡å—åŠ è½½
            setTimeout(testModuleLoading, 1000);
        });
        
        // æ•è·å…¨å±€é”™è¯¯
        window.addEventListener('error', (event) => {
            console.error('âŒ å…¨å±€é”™è¯¯:', event.error);
        });
        
        window.addEventListener('unhandledrejection', (event) => {
            console.error('âŒ æœªå¤„ç†çš„Promiseæ‹’ç»:', event.reason);
        });
    </script>
</body>
</html>
